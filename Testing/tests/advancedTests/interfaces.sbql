begin;

"creating class Cpatient and some objects of this class - Opatient"
create class Cpatient {instance Opatient : {name; age} procedure proc1(param1) {return 0} };
Cpatient includes create ("John" as name, 55 as age) as Opatient;
Cpatient includes create ("Mary" as name, 67 as age) as Opatient;

"creating interface Ipatient with object name OIpatient and binding it to Cpatient";
create interface Ipatient {instance OIpatient: {name; age} proc1(param1) };
Ipatient shows Cpatient;

"creating interface Ipatient2 and binding it to interface Ipatient";
create interface Ipatient2 {instance OIpatient2: {name}};
Ipatient2 shows Ipatient;

"querying through Ipatient2 (for objects OIpatient2)"
OIpatient2;

"creating view OldPatientsDef with virtual objects OldPatients"
create view OldPatientsDef {virtual objects OldPatients() { return (Opatient where age > 60) as op}	procedure on_retrieve() {return deref(op)}}

"creating interface IoldPatient and binding it to objects OldPatients"
create interface IoldPatient {instance OIoldPatient: {name}};
IoldPatient shows OldPatients;

"creating Schemas Patients1 and Patients2"
create schema Patients1 { Ipatient2 OldPatients }
create schema Patients2 { Ipatient2 IoldPatient }


end;